@repo = https://github.com/kristifidani/ai-code-explorer
@canonical_repo = https://github.com/kristifidani/ai-code-explorer.git

### Health check
GET {{host}}/health

### Ingestion #####

### Ingest ok
POST {{host}}/v1/ingest
Content-Type: application/json
Accept: application/json

{ "github_url": "{{repo}}" }

### Invalid URL (expect 400)
POST {{host}}/v1/ingest
Content-Type: application/json
Accept: application/json

{ "github_url": "https://example.com/not-github" }

### Answer Questions #####

### Ask a project-specific question (with GitHub context)
# Note: Use the canonical_url returned from the ingest response
POST {{host}}/v1/answer
Content-Type: application/json
Accept: application/json

{
  "canonical_github_url": "{{canonical_repo}}",
  "question": "What is this project about? Explain the main purpose in 3 sentences."
}

### Ask a general question (no GitHub context)
POST {{host}}/v1/answer
Content-Type: application/json
Accept: application/json

{
  "question": "What are the best practices for implementing RAG systems?"
}

### Ask another general question (no GitHub context)
POST {{host}}/v1/answer
Content-Type: application/json
Accept: application/json

{
  "question": "How do vector databases work and when should I use them?"
}

### Ask a general programming question (no GitHub context)
POST {{host}}/v1/answer
Content-Type: application/json
Accept: application/json

{
  "question": "What's the difference between microservices and monolithic architecture?"
}

### Project not found (expect 404)
POST {{host}}/v1/answer
Content-Type: application/json
Accept: application/json

{
  "canonical_github_url": "https://github.com/nonexistent/project.git",
  "question": "This should fail because project was not ingested"
}

### Invalid repo URL (expect 400 - no validation, just DB lookup fails)
POST {{host}}/v1/answer
Content-Type: application/json
Accept: application/json

{
  "canonical_github_url": "not-a-valid-url",
  "question": "This will fail because DB lookup won't find this malformed URL"
}
